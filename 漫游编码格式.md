[TOC]

# ä»€ä¹ˆæ˜¯Unicode

Unicodeå¯ä»¥ç†è§£ä¸ºå­—ç¬¦é›†ï¼Œç”±ä¸€ä¸ªå›½é™…ç»„ç»‡ç»™æ¯ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªç¼–å·ï¼ˆæˆ–è€…å«IDï¼‰ã€‚è®°ä½ï¼šUnicodeåªè´Ÿè´£åˆ†é…IDã€‚

è®¡ç®—æœºåªèƒ½ä¿å­˜0101çš„äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®ï¼Œæ‰€è°“åœ¨ä¸€ä¸ªå­—ç¬¦ä¿å­˜åˆ°è®¡ç®—æœºä¸­å…¶å®æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š

- æ‰¾åˆ°æŸä¸ªå­—ç¬¦çš„Unicodeå­—ç¬¦ç¼–å·
- æ ¹æ®å­—ç¬¦ç¼–å·ï¼Œé€‰æ‹©å“åº”çš„ç¼–ç æ ¼å¼ç”Ÿæˆå¯¹åº”çš„äºŒæœºåˆ¶æ•°æ®

ä¸¾ä¸ªä¾‹å­ï¼š

Unicodeå­—ç¬¦é›†ä¸­ï¼Œâ€œä¸­â€çš„ç¼–ç ç¼–å·æ˜¯4E2Dï¼Œâ€œå›½â€çš„ç¼–ç ç¼–å·æ˜¯56FDã€‚ä½†æ˜¯ç¼–ç ç¼–å·ç›¸å½“äºä¸€ä¸ªæ•°å­—ï¼Œæ€ä¹ˆä¿å­˜åˆ°è®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ä¸Šå‘¢ï¼Ÿè¿™æ—¶å€™å°±æ˜¯ç¼–ç å¯¹åº”çš„å­˜å‚¨æ ¼å¼çš„ä»»åŠ¡çš„ï¼ŒUnicodeçš„å­˜å‚¨æ ¼å¼æœ‰UTF-8ã€utf-16ç­‰å­˜å‚¨æ ¼å¼ã€‚å…¶ä¸­UTF-8çš„åº”ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œå°±ä»¥UTF-8 ä¸ºä¾‹å­ï¼šâ€œä¸­â€çš„UTF-8æ ¼å¼æ˜¯ï¼šE4B8ADã€‚â€œå›½â€çš„UTF-8æ ¼å¼æ˜¯ï¼šE59BBDã€‚ UTF-8æ˜¯çœŸæ­£ä¿å­˜åœ¨è®¡ç®—æœºå­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®æ ¼å¼ã€‚

![image-20201230175802402](image/image-20201230175802402.png)

Unicodeå¯ä»¥ç†è§£ä¸ºä¸€æœ¬å­—å…¸ï¼Œé‡Œé¢è®°å½•äº†æ¯ä¸ªå­—ç¬¦çš„ç¼–å·ã€‚è‡³äºè¿™äº›ç¼–å·æ€ä¹ˆå¯¹åº”ä¿å­˜åˆ°è®¡ç®—æœºä¸­å‘¢ï¼Ÿå°±æ˜¯UTF-8æŠŠUnicodeçš„ç¼–å·è½¬ä¹‰åä¿å­˜åˆ°è®¡ç®—æœºä¸­å»ã€‚å› æ­¤ï¼ŒUnicodeä¸uft-8ä¸æ˜¯åŒä¸€ä¸ªå±‚æ¬¡ä¸Šçš„ä¸œè¥¿ï¼ŒUTF-8æ ¼å¼å¯ä»¥è¯´æ˜¯Unicodeçš„ä¸€ç§å®ç°æ–¹å¼è€Œå·²ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Unicodeç»å¸¸æ¨å‡ºä¸€äº›æ–°çš„å­—ç¬¦ã€è¡¨æƒ…ï¼ˆğŸ˜Šï¼‰ç­‰emojiï¼Œå…¶å®å°±æ˜¯åœ¨åšå­—ç¬¦ç¼–ç ç¼–å·çš„äº‹æƒ…ï¼Œç»™æ¯ä¸ªå­—ç¬¦ä¸€ä¸ªIDã€‚

èµ„æºé“¾æ¥ï¼š

- ä¸­æ–‡çš„Unicodeç¼–ç ç¼–å·æŸ¥è¯¢ï¼šhttp://www.chi2ko.com/tool/CJK.htm
- ä¸­æ–‡çš„UTF-8æ ¼å¼æŸ¥è¯¢ï¼šhttp://www.shabsin.com/~rshabsin/chineseutf8chars.html
- Unicodeç»„ç»‡çš„å®˜ç½‘ï¼šhttps://home.unicode.org/



ç¼–ç æ ¼å¼å…¨æ™¯å›¾ï¼š

![image-20201230162147496](image/image-20201230162147496.png)



# ASCII

ASCIIå…¨ç§°**American Standard Code for Information Interchange**ï¼Œåªæœ‰128ä¸ªå­—ç¬¦ï¼Œä»åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œä¸€å¼€å§‹è®¾ç½®çš„æ—¶å€™åªè€ƒè™‘åˆ°äº†è‹±æ–‡å­—ç¬¦çš„ç¼–ç ï¼Œæ¯•ç«Ÿç¾å¸128ä¸ªå­—ç¬¦å°±å¤Ÿç”¨äº†ã€‚ä½†æ˜¯éšç€è®¡ç®—æœºæŠ€æœ¯çš„å‘å±•å’Œæ™®åŠï¼Œéè‹±æ–‡è¯­ç³»å›½å®¶ä½¿ç”¨å°±ä¼šå‡ºç°å­—ç¬¦ç¼–ç çš„é—®é¢˜çš„ã€‚æ‰€ä»¥å°±å‡ºç°äº†Unicodeã€GBKå’ŒGB2312è¿™äº›ç¼–ç æ ¼å¼ã€‚



ASCIIç¼–ç è¡¨ï¼š

![ASCII - Simple English Wikipedia, the free encyclopedia](image/875px-ASCII-Table-wide.svg.png)



# UTF-8ç¼–ç æ ¼å¼

UTF-8ç¼–ç æ ¼å¼æ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ ¼å¼ï¼Œä»ä¸€ä¸ªå­—èŠ‚åˆ°å››ä¸ªå­—èŠ‚ä¸ç­‰ï¼Œå¹¶ä¸”å…¼å®¹ASCIIæ ¼å¼ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆUTF-8æ ¼å¼ä¸ºä»€ä¹ˆè¿™ä¹ˆæµè¡Œå’Œè¢«è¿™ä¹ˆå¤šç³»ç»Ÿé‡‡ç”¨çš„åŸå› ã€‚å› ä¸ºå…¼å®¹ASCIIï¼ŒåŸæ¥ä½¿ç”¨ASCIIæ ¼å¼ä¿å­˜çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨UTF-8æ ¼å¼çš„è§£ç ç³»ç»Ÿè§£ç ï¼Œå¹¶ä¸”ä¸ä¼šå¢åŠ åŸæœ‰æ–‡æ¡£çš„ä½¿ç”¨ç©ºé—´ã€‚å¦‚æœUTF-8æ˜¯å®šé•¿çš„ï¼Œæ¯”å¦‚å››ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆåŸæ¥æœ‰ASCIIä¿å­˜çš„æ–‡ä»¶æ˜¯1KBçš„ï¼Œä½¿ç”¨UTF-8ç¼–ç åï¼Œå ç”¨çš„ç©ºé—´å°±éœ€è¦4KBäº†ã€‚

ç°åœ¨æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹UTF-8æ€ä¹ˆå®ç°å˜æˆç¼–ç å’Œå…¼å®¹ASCIIæ ¼å¼çš„ã€‚ç¼–ç è§„åˆ™æœ‰ä¸¤æ¡

- 1ä¸ªå­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚ç¬¬ä¸€ä½è®¾ç½®0ã€‚åé¢7ä½ä½œä¸ºè¿™ä¸ªç¬¦å·çš„Unicodeç ã€‚å› æ­¤ï¼ŒUTF-8å°±å¯ä»¥ä¸ASCIIå…¼å®¹äº†
- å¯¹äºnä¸ªå­—èŠ‚çš„ç¬¦å·ï¼ˆn>1&&n<=4)ã€‚ç¬¬1ä¸ªå­—èŠ‚çš„å‰nä½éƒ½æ˜¯1ï¼Œç¬¬n+1ä½æ˜¯0ã€‚åé¢çš„n-1ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ç½®ä¸º10ã€‚å‰©ä½™æ²¡æœ‰æåŠåˆ°çš„bitï¼Œä¸ºè¿™ä¸ªç¬¦å·çš„Unicodeç ã€‚

Unicodeå­—ç¬¦é›†å’ŒUTF-8ç¼–ç çš„å¯¹åº”è¡¨æ ¼å¦‚ä¸‹ï¼š

![Dive into Encoding with Unicode](image/utf8-encoding-table.png)

- Unicodeç¼–ç æ˜¯00åˆ°7Fçš„ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚æ‰€ä»¥0xxx xxxxä¸­çš„xè¡¨ç¤ºï¼Œxå¯ä»¥ä¸º0ä¹Ÿå¯ä»¥ä¸º1ï¼Œå–å†³äºè¿™ä¸ªç¼–ç æ˜¯ä»€ä¹ˆã€‚
- Unicodeç¼–ç æ˜¯80åˆ°7FFçš„ï¼Œä½¿ç”¨2ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚110x xxxx 10xx xxxxæ˜¯å›ºå®šçš„æ ¼å¼ï¼Œå‰©ä½™çš„11ä¸ªxï¼Œè¡¨ç¤ºåªæœ‰11ä¸ªbitsç”¨æ¥å¡«å……Unicode
- Unicodeç¼–ç æ˜¯800åˆ°FFFFçš„ï¼Œä½¿ç”¨3ä¸ªå­—èŠ‚è¡¨ç¤º
- Unicodeç¼–ç æ˜¯10000åˆ°10FFFFçš„ï¼Œä½¿ç”¨4ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚



â€œä¸­â€çš„Unicodeç¼–ç æ˜¯4E2Dï¼Œâ€œå›½â€çš„Unicodeç¼–ç æ˜¯56FDï¼Œéƒ½éœ€è¦ä½¿ç”¨3ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºçš„UTF-8ç¼–ç ä¸­ï¼Œ1110 xxxx 10xx xxxx 10xx xxxxéƒ½æ˜¯å›ºå®šçš„æ ¼å¼ï¼Œå‰©ä½™çš„xå°±éœ€è¦ä½¿ç”¨Unicodeçš„äºŒè¿›åˆ¶( å›½ï¼š101011011111101)ï¼Œä»æœ€å³è¾¹çš„xå¼€å§‹å¡«å……ï¼Œå¦‚æœä¸å¤Ÿå°±å¡«Unicodeçš„äºŒè¿›åˆ¶ç¼–ç 0ã€‚ä¸‹é¢ä»¥â€œå›½â€å­—ä¸ºä¾‹å­ï¼Œæ¼”ç¤ºè½¬æ¢çš„è¿‡ç¨‹



![image-20201230172653720](image/image-20201230172653720.png)



# ç¼–ç è½¬æ¢å·¥å…·

- hexdump 

  ```bash
  1.  ç¼–å†™æ–‡ä»¶ï¼šç¼–ç ä¾‹å­.txt
  > cat ç¼–ç ä¾‹å­.txt
  ä¸­å›½
  
  2. æ£€æŸ¥æ–‡ä»¶çš„ç±»å‹ï¼Œç¡®å®šæ˜¯UTF-8ç¼–ç æ ¼å¼çš„
  > file ç¼–ç ä¾‹å­.txt
  ç¼–ç ä¾‹å­.txt: UTF-8 Unicode text
  
  3. æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼š
  >  hexdump  ç¼–ç ä¾‹å­.txt
  0000000 b8e4 e5ad bd9b 000a
  0000007
  
  4. hexdump -Cå‚æ•°è¾“å‡ºï¼š
  > hexdump -C  ç¼–ç ä¾‹å­.txt
  00000000  e4 b8 ad e5 9b bd 0a                              |.......|
  00000007
  ```

  â€‹	hexdumpè¾“å‡ºè§£æï¼š

  ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼še4

  ç¬¬äºŒä¸ªå­—èŠ‚ï¼šb8

  ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼še5

  å¯ä»¥ä½¿ç”¨odå‘½ä»¤éªŒè¯ï¼š`od  ç¼–ç ä¾‹å­.txt  -N 1 -H -j 1`



- æ–‡ä»¶å†…å®¹ç¼–ç è½¬æ¢å·¥å…·ï¼š iconv ,åªæŠŠæ–‡ä»¶çš„å†…å®¹è¿›è¡Œäº†è½¬æ¢ï¼Œå¹¶æ²¡æœ‰å¯¹æ–‡ä»¶åå­—è¿›è¡Œè½¬æ¢

  ```bash
  uft-8è½¬æ¢æˆGBK
  > iconv -f utf-8 -t gbk ç¼–ç ä¾‹å­.txt  > output
  
  > file output
  output: ISO-8859 text
  
  GBK è½¬ utf-8
  > iconv -f gbk -t utf-8 output  > ç¼–ç ä¾‹å­.txt
  ```

  

- å¯¹æ–‡ä»¶åå­—è¿›è¡Œè½¬æ¢ï¼ˆä¸æ¶‰åŠå†…å®¹çš„è½¬æ¢ï¼‰

  ```
  > convmv -f utf-8 -t gbk --notest ç¼–ç ä¾‹å­.txt
  
  ç¼–ç åï¼Œæ–‡ä»¶çš„åå­—ä¹±ç äº†ã€‚ã€‚
  
  ????????.txt
  
  > è½¬æ¢å›æ¥ convmv -f gbk -t utf-8 --notest ????????.txt
  ```

  